import ne from"./DocsContentNavigation.1de632b2.js";import se from"./DocsPageHeader.b279b6a8.js";import{d as G,r as p,I as W,o as le,a as oe,W as z,z as K,b as r,c as g,e as c,t as B,n as C,az as _,D as M,C as U,X as ue,aA as re,O as ie,f as F,F as X,V as Y,g as h,Y as pe,aB as b,U as ce,m as de,Z as fe,E as P,w,M as V,a0 as me,q as be}from"./entry.eb1efcde.js";import{o as ge}from"./index.fc6b1cef.js";import{_ as q}from"./RplIcon.vue.ba5ce867.js";import{u as ve}from"./useRippleEvent.102d8ac1.js";import{_ as _e}from"./RplPromoCard.vue.b940ab48.js";import he from"./DocsCardGrid.a732fc81.js";import{_ as ye}from"./AppSidebarLayout.vue.dda6a556.js";import{_ as we}from"./AppLayout.vue.a14aa11c.js";import{u as Se}from"./asyncData.5ab6b83d.js";import{u as $e}from"./head.d496c025.js";import"./useDocsNavigation.f9915811.js";import"./RplLink.vue.635a5c07.js";import"./RplExpandable.vue.0d662792.js";import"./DocsNavLink.da5fe128.js";import"./nuxt-link.a4d39bf0.js";import"./ready.b46cef5b.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./config.b6ac07ad.js";import"./DocsLink.16b8ac83.js";import"./RplTextLink.css.416f76cb.js";import"./RplImage.css.008b9ba5.js";import"./RplList.vue.b85db1f0.js";const Oe=["for"],Ie={class:"rpl-search-bar__inner"},Le=["onKeydown"],Ve=["id","aria-owns","aria-expanded","placeholder"],Be=c("div",{class:"rpl-search-bar__menu"},[c("span",{class:"rpl-search-bar__menu-noresults"}," No results ")],-1),Re=["id"],Te=["id","data-option-id","role","onKeydown","onClick"],ke={class:"rpl-search-bar__right"},Ce={type:"submit","aria-label":"search",class:"rpl-search-bar-submit rpl-u-focusable-inline"},Fe={key:0,class:"rpl-search-bar-submit__label rpl-type-label rpl-type-weight-bold"},Ae={class:"rpl-search-bar-submit__icon"},De={inheritAttrs:!1},Ee=G({...De,__name:"RplSearchBar",props:{variant:{default:"default"},id:{},autoFocus:{type:Boolean,default:!1},inputLabel:{default:"Search"},inputValue:{default:""},submitLabel:{type:[String,Boolean],default:"Search"},suggestions:{default:()=>[]},maxSuggestionsDisplayed:{default:10},placeholder:{default:""},globalEvents:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!1},getSuggestionVal:{type:Function,default:d=>d},getOptionLabel:{type:Function,default:d=>d},getOptionId:{type:Function,default:d=>d},isOptionSelectable:{type:Function,default:d=>!0},showLabel:{type:Boolean,default:!1},isFreeText:{type:Boolean,default:!0}},emits:["update:inputValue","submit"],setup(d,{emit:f}){const n=d,{emitRplEvent:v}=ve("rpl-search-bar",f),o=p(""),A=p(null),m=p(null),R=p(null),y=p([]),S=p(null),$=W(()=>`${n.id}__menu`),s=p(!1),l=p(null),O=p(!1);le(()=>{n.autoFocus&&(S.value=setTimeout(()=>{var e;return(e=m.value)==null?void 0:e.focus()},100))}),oe(()=>{S.value&&clearTimeout(S.value)}),ge(A,()=>{u(!1)});const T=e=>{v("submit",{action:"search",id:n.id,name:n.inputLabel,value:o.value,text:e==="button"?n.submitLabel:null,type:e},{global:n.globalEvents})},D=e=>{o.value=e.target.value,f("update:inputValue",e.target.value),s.value=!0},I=(e,t)=>{var i;const a=n.getOptionLabel(e);t&&((i=m.value)==null||i.focus()),o.value=n.getSuggestionVal(e),f("update:inputValue",e),s.value=!1,v("submit",{action:"search",id:n.id,text:n.getSuggestionVal(e),name:n.inputLabel,value:a,payload:e,type:"suggestion"},{global:n.globalEvents})},L=()=>n.getOptionId(n.suggestions[0]),E=(e=!1)=>{var t;s.value=!0,e&&((t=n.suggestions)!=null&&t.length)&&(l.value=L())},u=(e=!1)=>{var t;s.value=!1,l.value=null,e&&((t=m.value)==null||t.focus())},k=async()=>{var e;O.value=!0,await K(),(e=m.value)==null||e.focus()},Z=()=>{O.value=!1},j=async()=>{var e;f("update:inputValue",null),o.value="",v("submit",{action:"search",id:n.id,text:"",name:n.inputLabel,value:"",payload:null,type:"suggestion"},{global:n.globalEvents}),await K(),(e=m.value)==null||e.focus()},J=()=>{const e=n.suggestions.findIndex(t=>n.getOptionId(t)===l.value);e<0?l.value=L():e<n.suggestions.length-1&&(l.value=n.getOptionId(n.suggestions[e+1]))},Q=()=>{const e=n.suggestions.findIndex(t=>n.getOptionId(t)===l.value);e<0?l.value=L():e>0&&(l.value=n.getOptionId(n.suggestions[e-1]))},x=e=>e>47&&e<58||e===32||e===8||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223,ee=e=>{var t;x(e.keyCode)&&((t=m.value)==null||t.focus())},te=e=>l.value===e,ae=e=>{const t=y.value.find(i=>i.dataset.optionId===e),a=R.value;if(a.scrollHeight>a.clientHeight){let i=a.clientHeight+a.scrollTop,H=t.offsetTop+t.offsetHeight;H>i?a.scrollTop=H-a.clientHeight:t.offsetTop<a.scrollTop&&(a.scrollTop=t.offsetTop)}t&&t.focus()};z(()=>n.inputValue,e=>{o.value=n.getSuggestionVal(e)},{immediate:!0}),z(l,async e=>{e!==null&&(await K(),ae(e))});const N=e=>e.toLowerCase().replace(/[^\w-]+/g,"-");return(e,t)=>(r(),g("form",{class:C({"rpl-search-bar":!0,[`rpl-search-bar--${e.variant}`]:!!e.variant,"rpl-search-bar--with-label":!!e.submitLabel,"rpl-search-bar--with-clear-btn":!!e.inputValue||!!o.value}),style:pe({"--local-max-items":e.maxSuggestionsDisplayed}),onSubmit:t[9]||(t[9]=b(a=>T("button"),["prevent"]))},[c("label",{class:C({"rpl-search-bar__label":!0,"rpl-u-visually-hidden":!e.showLabel,"rpl-type-h4-fixed":!0}),for:e.id},B(e.inputLabel),11,Oe),c("div",Ie,[c("div",{ref_key:"containerRef",ref:A,class:"rpl-search-bar__input-wrap",onKeydown:[_(b(Q,["prevent"]),["up"]),_(b(J,["prevent"]),["down"]),t[5]||(t[5]=_(b(a=>u(!0),["prevent"]),["esc"])),t[6]||(t[6]=_(b(a=>u(!1),["exact"]),["tab"])),t[7]||(t[7]=_(b(a=>u(!1),["shift"]),["tab"]))]},[!e.isFreeText&&e.inputValue&&!O.value&&!s.value?(r(),g("div",{key:0,tabindex:"0",class:C({"rpl-search-bar__input":!0,"rpl-u-focusable-outline":!0,"rpl-u-focusable-outline--no-border":!0,"rpl-u-focusable--force-on":s.value}),onFocus:t[0]||(t[0]=a=>k())},[M(e.$slots,"suggestion",{option:{option:e.inputValue}},()=>[U(B(e.getOptionLabel(e.inputValue)),1)])],34)):ue((r(),g("input",ie({key:1},e.$attrs,{id:e.id,ref_key:"inputRef",ref:m,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value=a),"aria-owns":$.value,autocomplete:"off","aria-autocomplete":"list","aria-expanded":s.value,placeholder:e.placeholder,role:"combobox",class:{"rpl-search-bar__input":!0,"rpl-u-focusable-outline":!0,"rpl-u-focusable-outline--no-border":!0,"rpl-u-focusable--force-on":s.value},type:"search",onInput:D,onFocus:t[2]||(t[2]=a=>E(!1)),onBlur:t[3]||(t[3]=a=>Z()),onKeydown:t[4]||(t[4]=_(b(a=>T("enter"),["prevent"]),["enter"]))}),null,16,Ve)),[[re,o.value]]),e.showNoResults&&e.suggestions.length===0&&o.value&&s.value?M(e.$slots,"noresults",{key:2},()=>[Be]):F("",!0),e.suggestions.length&&s.value?(r(),g("div",{key:3,id:$.value,ref_key:"menuRef",ref:R,class:"rpl-search-bar__menu",role:"listbox",tabindex:"-1"},[(r(!0),g(X,null,Y(e.suggestions,a=>(r(),g("div",{id:N(e.getOptionId(a)),key:`opt-${N(e.getOptionId(a))}`,ref_for:!0,ref_key:"optionRefs",ref:y,"data-option-id":e.getOptionId(a),role:e.isOptionSelectable(a)?"option":null,class:C({"rpl-search-bar__menu-option":!0,"rpl-u-focusable-block":!0,"rpl-u-focusable--force-on":te(e.getOptionId(a))}),tabindex:"-1",onKeydown:[_(b(i=>e.isOptionSelectable(a)&&I(a,!0),["prevent"]),["space"]),_(b(i=>e.isOptionSelectable(a)&&I(a,!0),["prevent"]),["enter"]),i=>e.isOptionSelectable(a)&&ee],onClick:i=>e.isOptionSelectable(a)&&I(a,!1)},[M(e.$slots,"suggestion",{option:{option:a}},()=>[U(B(e.getOptionLabel(a)),1)])],42,Te))),128))],8,Re)):F("",!0)],40,Le),c("div",ke,[o.value||e.inputValue?(r(),g("button",{key:0,type:"button","aria-label":"Clear search",class:"rpl-search-bar__clear rpl-u-focusable-inline",onClick:t[8]||(t[8]=a=>j())},[h(q,{name:"icon-cancel-circle-filled"})])):F("",!0),c("button",Ce,[e.submitLabel?(r(),g("span",Fe,B(e.submitLabel),1)):F("",!0),c("span",Ae,[h(q,{name:"icon-search",size:"m"})])])])])],38))}});const Ke={class:"rpl-u-margin-b-8"},rt=G({__name:"module-listing",async setup(d){let f,n;const{page:v}=ce();$e(v);const m=de().params.slug[0]==="framework",{data:R}=([f,n]=fe(async()=>Se("module-listing",async()=>await be().where({isModuleInfo:{$eq:!0}}).find())),f=await f,n(),f),y=p(""),S=W(()=>(R.value||[]).filter($=>{const s=$.name.toLowerCase(),l=y.value.toLowerCase();return s.includes(l)}));return($,s)=>{const l=ne,O=se,T=Ee,D=_e,I=he,L=ye,E=we;return r(),P(E,{theme:m?"module":"default"},{menuContents:w(()=>[h(l)]),default:w(()=>[h(L,{hideMobileSidebar:""},{aside:w(()=>[h(l)]),pageHeader:w(()=>[h(O,{title:V(v).title,description:V(v).description,links:V(v).links},null,8,["title","description","links"]),c("div",Ke,[h(T,{id:"listing-search",inputValue:V(y),"onUpdate:inputValue":s[0]||(s[0]=u=>me(y)?y.value=u:null)},null,8,["inputValue"])])]),default:w(()=>[h(I,null,{default:w(()=>[(r(!0),g(X,null,Y(V(S),u=>{var k;return r(),P(D,{key:u._path,title:u.name,url:`${(k=u._path)==null?void 0:k.replace(/\/_module$/,"")}`},{default:w(()=>[c("p",null,B(u.description),1)]),_:2},1032,["title","url"])}),128))]),_:1})]),_:1})]),_:1},8,["theme"])}}});export{rt as default};
