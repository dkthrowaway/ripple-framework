import Z from"./DocsContentNavigation.bc9336a6.js";import j from"./DocsPageHeader.bca849bf.js";import{d as U,r as u,I as P,o as J,a as Q,W as E,z as ee,b as f,c as w,e as l,t as I,X as te,az as se,O as ne,aA as d,D as F,f as M,F as q,V as x,n as H,C as ae,g as h,Y as oe,aB as r,U as le,m as re,Z as ue,E as z,w as g,M as R,a0 as ie,q as pe}from"./entry.a68c6b74.js";import{o as ce}from"./index.f4b51854.js";import{_ as de}from"./RplIcon.vue.aa07d61f.js";import{u as fe}from"./useRippleEvent.380451f7.js";import{_ as me}from"./RplPromoCard.vue.b167aad3.js";import _e from"./DocsCardGrid.a2a9a438.js";import{_ as be}from"./AppSidebarLayout.vue.23b43215.js";import{_ as ve}from"./AppLayout.vue.c88af108.js";import{u as ge}from"./asyncData.a3181469.js";import{u as he}from"./head.06f26b0b.js";import"./useDocsNavigation.a4d050ee.js";import"./RplLink.vue.48e75d10.js";import"./RplExpandable.vue.70801638.js";import"./DocsNavLink.e9f46e53.js";import"./nuxt-link.61ddb97a.js";import"./ready.8d14132c.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./config.af68a6cc.js";import"./DocsLink.0ae3ec9d.js";import"./RplTextLink.css.9a3c5ec6.js";import"./RplImage.css.4821fc55.js";import"./RplList.vue.c84ad2ef.js";const ye=["onKeydown"],we=["for"],Se=["id","aria-owns","aria-expanded","placeholder"],$e=l("div",{class:"rpl-search-bar__menu"},[l("span",{class:"rpl-search-bar__menu-noresults"}," No results ")],-1),Le=["id"],Oe=["id","data-option-id","role","onKeydown","onClick"],Re={class:"rpl-search-bar__right"},Be={type:"submit","aria-label":"search",class:"rpl-search-bar-submit rpl-u-focusable-inline"},Te={key:0,class:"rpl-search-bar-submit__label rpl-type-label rpl-type-weight-bold"},Ve={class:"rpl-search-bar-submit__icon"},Ce={inheritAttrs:!1},Ie=U({...Ce,__name:"RplSearchBar",props:{variant:{default:"default"},id:{},autoFocus:{type:Boolean,default:!1},inputLabel:{default:"Search"},inputValue:{default:""},submitLabel:{type:[String,Boolean],default:"Search"},suggestions:{default:()=>[]},maxSuggestionsDisplayed:{default:10},placeholder:{default:void 0},globalEvents:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!1},getOptionLabel:{type:Function,default:S=>S.toString()},isOptionSelectable:{type:Function,default:S=>!0}},emits:["update:inputValue","submit"],setup(S,{emit:i}){const n=S,{emitRplEvent:m}=fe("rpl-search-bar",i),p=u(""),k=u(null),_=u(null),B=u(null),b=u([]),T=u(null),$=P(()=>`${n.id}__menu`),o=u(!1),a=u(null);J(()=>{n.autoFocus&&(T.value=setTimeout(()=>_.value.focus(),100))}),Q(()=>{clearTimeout(T.value)}),ce(k,()=>{y(!1)});const V=e=>{m("submit",{action:"search",id:n.id,value:p.value,text:e==="button"?n.submitLabel:null,type:e},{global:n.globalEvents})},A=e=>{p.value=e.target.value,i("update:inputValue",e.target.value),o.value=!0},L=(e,s)=>{const t=n.getOptionLabel(e);s&&_.value.focus(),p.value=e,i("update:inputValue",t),o.value=!1,m("submit",{action:"search",id:n.id,text:t,value:t,payload:e,type:"suggestion"},{global:n.globalEvents})},O=()=>n.suggestions[0],D=(e=!1)=>{var s;o.value=!0,e&&((s=n.suggestions)!=null&&s.length)&&(a.value=O())},y=(e=!1)=>{o.value=!1,a.value=null,e&&_.value.focus()},c=()=>{const e=n.suggestions.findIndex(s=>s===a.value);e<0?a.value=O():e<n.suggestions.length-1&&(a.value=n.suggestions[e+1])},C=()=>{const e=n.suggestions.findIndex(s=>s===a.value);e<0?a.value=O():e>0&&(a.value=n.suggestions[e-1])},G=e=>e>47&&e<58||e===32||e===8||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223,W=e=>{G(e.keyCode)&&_.value.focus()},X=e=>a.value===e,Y=e=>{const s=b.value.find(v=>v.dataset.optionId===e),t=B.value;if(t.scrollHeight>t.clientHeight){let v=t.clientHeight+t.scrollTop,N=s.offsetTop+s.offsetHeight;N>v?t.scrollTop=N-t.clientHeight:s.offsetTop<t.scrollTop&&(t.scrollTop=s.offsetTop)}s&&s.focus()};E(()=>n.inputValue,e=>{p.value=e},{immediate:!0}),E(a,async e=>{e!==null&&(await ee(),Y(e))});const K=e=>e.toLowerCase().replace(/[^\w-]+/g,"-");return(e,s)=>(f(),w("form",{class:H(`rpl-search-bar rpl-search-bar--${e.variant}`),style:oe({"--local-max-items":e.maxSuggestionsDisplayed}),onSubmit:s[6]||(s[6]=r(t=>V("button"),["prevent"]))},[l("div",{ref_key:"containerRef",ref:k,class:"rpl-search-bar__input-wrap",onKeydown:[d(r(c,["prevent"]),["down"]),d(r(C,["prevent"]),["up"]),s[3]||(s[3]=d(r(t=>y(!0),["prevent"]),["esc"])),s[4]||(s[4]=d(r(t=>y(!1),["exact"]),["tab"])),s[5]||(s[5]=d(r(t=>y(!1),["shift"]),["tab"]))]},[l("label",{class:"rpl-u-visually-hidden",for:e.id},I(e.inputLabel),9,we),te(l("input",ne(e.$attrs,{id:e.id,ref_key:"inputRef",ref:_,"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),"aria-owns":$.value,autocomplete:"off","aria-autocomplete":"list","aria-expanded":o.value,placeholder:e.placeholder,role:"combobox",class:{"rpl-search-bar__input":!0,"rpl-u-focusable-outline":!0,"rpl-u-focusable-outline--no-border":!0,"rpl-u-focusable--force-on":o.value},type:"search",onInput:A,onFocus:s[1]||(s[1]=t=>D(!1)),onKeydown:s[2]||(s[2]=d(r(t=>V("enter"),["prevent"]),["enter"]))}),null,16,Se),[[se,p.value]]),e.showNoResults&&e.suggestions.length===0&&p.value.length>0&&o.value?F(e.$slots,"noresults",{key:0},()=>[$e]):M("",!0),e.suggestions.length&&o.value?(f(),w("div",{key:1,id:$.value,ref_key:"menuRef",ref:B,class:"rpl-search-bar__menu",role:"listbox",tabindex:"-1"},[(f(!0),w(q,null,x(e.suggestions,t=>(f(),w("div",{id:K(e.getOptionLabel(t)),key:`opt-${K(e.getOptionLabel(t))}`,ref_for:!0,ref_key:"optionRefs",ref:b,"data-option-id":e.getOptionLabel(t),role:e.isOptionSelectable(t)?"option":null,class:H({"rpl-search-bar__menu-option":!0,"rpl-u-focusable-block":!0,"rpl-u-focusable--force-on":X(K(e.getOptionLabel(t)))}),tabindex:"-1",onKeydown:[d(r(v=>e.isOptionSelectable(t)&&L(t,!0),["prevent"]),["space"]),d(r(v=>e.isOptionSelectable(t)&&L(t,!0),["prevent"]),["enter"]),v=>e.isOptionSelectable(t)&&W],onClick:v=>e.isOptionSelectable(t)&&L(t,!1)},[F(e.$slots,"suggestion",{option:{option:t}},()=>[ae(I(e.getOptionLabel(t)),1)])],42,Oe))),128))],8,Le)):M("",!0)],40,ye),l("div",Re,[l("button",Be,[e.submitLabel?(f(),w("span",Te,I(e.submitLabel),1)):M("",!0),l("span",Ve,[h(de,{name:"icon-search",size:"m"})])])])],38))}});const ke={class:"rpl-u-margin-b-8"},nt=U({__name:"module-listing",async setup(S){let i,n;const{page:m}=le();he(m);const _=re().params.slug[0]==="framework",{data:B}=([i,n]=ue(async()=>ge("module-listing",async()=>await pe().where({isModuleInfo:{$eq:!0}}).find())),i=await i,n(),i),b=u(""),T=P(()=>(B.value||[]).filter($=>{const o=$.name.toLowerCase(),a=b.value.toLowerCase();return o.includes(a)}));return($,o)=>{const a=Z,V=j,A=Ie,L=me,O=_e,D=be,y=ve;return f(),z(y,{theme:_?"module":"default"},{menuContents:g(()=>[h(a)]),default:g(()=>[h(D,{hideMobileSidebar:""},{aside:g(()=>[h(a)]),pageHeader:g(()=>[h(V,{title:R(m).title,description:R(m).description,links:R(m).links},null,8,["title","description","links"]),l("div",ke,[h(A,{id:"listing-search",inputValue:R(b),"onUpdate:inputValue":o[0]||(o[0]=c=>ie(b)?b.value=c:null)},null,8,["inputValue"])])]),default:g(()=>[h(O,null,{default:g(()=>[(f(!0),w(q,null,x(R(T),c=>{var C;return f(),z(L,{key:c._path,title:c.name,url:`${(C=c._path)==null?void 0:C.replace(/\/_module$/,"")}`},{default:g(()=>[l("p",null,I(c.description),1)]),_:2},1032,["title","url"])}),128))]),_:1})]),_:1})]),_:1},8,["theme"])}}});export{nt as default};
