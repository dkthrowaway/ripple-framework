import te from"./DocsContentNavigation.041f3049.js";import se from"./DocsPageHeader.5f1a0a2f.js";import{d as q,r as u,I as G,o as ne,a as ae,W as H,z,b as r,c as b,e as i,t as B,n as k,az as g,D as K,C as U,X as oe,aA as le,O as ue,f as M,F as W,V as X,g as w,Y as re,aB as c,U as ie,m as pe,Z as ce,E as P,w as y,M as L,a0 as de,q as fe}from"./entry.869864d3.js";import{o as me}from"./index.c769be74.js";import{_ as ge}from"./RplIcon.vue.46a4c3e7.js";import{u as be}from"./useRippleEvent.72e2ebc8.js";import{_ as ve}from"./RplPromoCard.vue.d164a899.js";import _e from"./DocsCardGrid.04321093.js";import{_ as he}from"./AppSidebarLayout.vue.fed97c62.js";import{_ as ye}from"./AppLayout.vue.849d5372.js";import{u as we}from"./asyncData.fb5180fd.js";import{u as Se}from"./head.1575d1af.js";import"./useDocsNavigation.9c242e2c.js";import"./RplLink.vue.94ee4e9e.js";import"./RplExpandable.vue.f25b095f.js";import"./DocsNavLink.d4242087.js";import"./nuxt-link.38de39a5.js";import"./ready.6f3d85c0.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./config.45000f4f.js";import"./DocsLink.913f37f8.js";import"./RplTextLink.css.e5be020a.js";import"./RplImage.css.c1e472f1.js";import"./RplList.vue.362539c1.js";const $e=["for"],Oe={class:"rpl-search-bar__inner"},Ie=["onKeydown"],Le=["id","aria-owns","aria-expanded","placeholder"],Be=i("div",{class:"rpl-search-bar__menu"},[i("span",{class:"rpl-search-bar__menu-noresults"}," No results ")],-1),Re=["id"],Ve=["id","data-option-id","role","onKeydown","onClick"],Te={class:"rpl-search-bar__right"},Fe={type:"submit","aria-label":"search",class:"rpl-search-bar-submit rpl-u-focusable-inline"},ke={key:0,class:"rpl-search-bar-submit__label rpl-type-label rpl-type-weight-bold"},Ce={class:"rpl-search-bar-submit__icon"},Ae={inheritAttrs:!1},De=q({...Ae,__name:"RplSearchBar",props:{variant:{default:"default"},id:{},autoFocus:{type:Boolean,default:!1},inputLabel:{default:"Search"},inputValue:{default:""},submitLabel:{type:[String,Boolean],default:"Search"},suggestions:{default:()=>[]},maxSuggestionsDisplayed:{default:10},placeholder:{default:""},globalEvents:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!1},getSuggestionVal:{type:Function,default:p=>p},getOptionLabel:{type:Function,default:p=>p},getOptionId:{type:Function,default:p=>p},isOptionSelectable:{type:Function,default:p=>!0},showLabel:{type:Boolean,default:!1},isFreeText:{type:Boolean,default:!0}},emits:["update:inputValue","submit"],setup(p,{emit:d}){const n=p,{emitRplEvent:v}=be("rpl-search-bar",d),f=u(""),C=u(null),m=u(null),R=u(null),_=u([]),V=u(null),S=G(()=>`${n.id}__menu`),a=u(!1),o=u(null),$=u(!1);ne(()=>{n.autoFocus&&(V.value=setTimeout(()=>m.value.focus(),100))}),ae(()=>{clearTimeout(V.value)}),me(C,()=>{l(!1)});const T=e=>{v("submit",{action:"search",id:n.id,name:n.inputLabel,value:f.value,text:e==="button"?n.submitLabel:null,type:e},{global:n.globalEvents})},A=e=>{f.value=e.target.value,d("update:inputValue",e.target.value),a.value=!0},O=(e,s)=>{const t=n.getOptionLabel(e);s&&m.value.focus(),f.value=n.getSuggestionVal(e),d("update:inputValue",e),a.value=!1,v("submit",{action:"search",id:n.id,text:n.getSuggestionVal(e),name:n.inputLabel,value:t,payload:e,type:"suggestion"},{global:n.globalEvents})},I=()=>n.getOptionId(n.suggestions[0]),D=(e=!1)=>{var s;a.value=!0,e&&((s=n.suggestions)!=null&&s.length)&&(o.value=I())},l=(e=!1)=>{a.value=!1,o.value=null,e&&m.value.focus()},F=async()=>{$.value=!0,await z(),m.value.focus()},Y=()=>{$.value=!1},Z=()=>{const e=n.suggestions.findIndex(s=>n.getOptionId(s)===o.value);e<0?o.value=I():e<n.suggestions.length-1&&(o.value=n.getOptionId(n.suggestions[e+1]))},j=()=>{const e=n.suggestions.findIndex(s=>n.getOptionId(s)===o.value);e<0?o.value=I():e>0&&(o.value=n.getOptionId(n.suggestions[e-1]))},x=e=>e>47&&e<58||e===32||e===8||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223,J=e=>{x(e.keyCode)&&m.value.focus()},Q=e=>o.value===e,ee=e=>{const s=_.value.find(h=>h.dataset.optionId===e),t=R.value;if(t.scrollHeight>t.clientHeight){let h=t.clientHeight+t.scrollTop,E=s.offsetTop+s.offsetHeight;E>h?t.scrollTop=E-t.clientHeight:s.offsetTop<t.scrollTop&&(t.scrollTop=s.offsetTop)}s&&s.focus()};H(()=>n.inputValue,e=>{f.value=n.getSuggestionVal(e)},{immediate:!0}),H(o,async e=>{e!==null&&(await z(),ee(e))});const N=e=>e.toLowerCase().replace(/[^\w-]+/g,"-");return(e,s)=>(r(),b("form",{class:k(`rpl-search-bar rpl-search-bar--${e.variant}`),style:re({"--local-max-items":e.maxSuggestionsDisplayed}),onSubmit:s[8]||(s[8]=c(t=>T("button"),["prevent"]))},[i("label",{class:k({"rpl-search-bar__label":!0,"rpl-u-visually-hidden":!e.showLabel,"rpl-type-h4-fixed":!0}),for:e.id},B(e.inputLabel),11,$e),i("div",Oe,[i("div",{ref_key:"containerRef",ref:C,class:"rpl-search-bar__input-wrap",onKeydown:[g(c(j,["prevent"]),["up"]),g(c(Z,["prevent"]),["down"]),s[5]||(s[5]=g(c(t=>l(!0),["prevent"]),["esc"])),s[6]||(s[6]=g(c(t=>l(!1),["exact"]),["tab"])),s[7]||(s[7]=g(c(t=>l(!1),["shift"]),["tab"]))]},[!e.isFreeText&&e.inputValue&&!$.value&&!a.value?(r(),b("div",{key:0,tabindex:"0",class:k({"rpl-search-bar__input":!0,"rpl-u-focusable-outline":!0,"rpl-u-focusable-outline--no-border":!0,"rpl-u-focusable--force-on":a.value}),onFocus:s[0]||(s[0]=t=>F())},[K(e.$slots,"suggestion",{option:{option:e.inputValue}},()=>[U(B(e.getOptionLabel(e.inputValue)),1)])],34)):oe((r(),b("input",ue({key:1},e.$attrs,{id:e.id,ref_key:"inputRef",ref:m,"onUpdate:modelValue":s[1]||(s[1]=t=>f.value=t),"aria-owns":S.value,autocomplete:"off","aria-autocomplete":"list","aria-expanded":a.value,placeholder:e.placeholder,role:"combobox",class:{"rpl-search-bar__input":!0,"rpl-u-focusable-outline":!0,"rpl-u-focusable-outline--no-border":!0,"rpl-u-focusable--force-on":a.value},type:"search",onInput:A,onFocus:s[2]||(s[2]=t=>D(!1)),onBlur:s[3]||(s[3]=t=>Y()),onKeydown:s[4]||(s[4]=g(c(t=>T("enter"),["prevent"]),["enter"]))}),null,16,Le)),[[le,f.value]]),e.showNoResults&&e.suggestions.length===0&&f.value&&a.value?K(e.$slots,"noresults",{key:2},()=>[Be]):M("",!0),e.suggestions.length&&a.value?(r(),b("div",{key:3,id:S.value,ref_key:"menuRef",ref:R,class:"rpl-search-bar__menu",role:"listbox",tabindex:"-1"},[(r(!0),b(W,null,X(e.suggestions,t=>(r(),b("div",{id:N(e.getOptionId(t)),key:`opt-${N(e.getOptionId(t))}`,ref_for:!0,ref_key:"optionRefs",ref:_,"data-option-id":e.getOptionId(t),role:e.isOptionSelectable(t)?"option":null,class:k({"rpl-search-bar__menu-option":!0,"rpl-u-focusable-block":!0,"rpl-u-focusable--force-on":Q(e.getOptionId(t))}),tabindex:"-1",onKeydown:[g(c(h=>e.isOptionSelectable(t)&&O(t,!0),["prevent"]),["space"]),g(c(h=>e.isOptionSelectable(t)&&O(t,!0),["prevent"]),["enter"]),h=>e.isOptionSelectable(t)&&J],onClick:h=>e.isOptionSelectable(t)&&O(t,!1)},[K(e.$slots,"suggestion",{option:{option:t}},()=>[U(B(e.getOptionLabel(t)),1)])],42,Ve))),128))],8,Re)):M("",!0)],40,Ie),i("div",Te,[i("button",Fe,[e.submitLabel?(r(),b("span",ke,B(e.submitLabel),1)):M("",!0),i("span",Ce,[w(ge,{name:"icon-search",size:"m"})])])])])],38))}});const Ke={class:"rpl-u-margin-b-8"},ut=q({__name:"module-listing",async setup(p){let d,n;const{page:v}=ie();Se(v);const m=pe().params.slug[0]==="framework",{data:R}=([d,n]=ce(async()=>we("module-listing",async()=>await fe().where({isModuleInfo:{$eq:!0}}).find())),d=await d,n(),d),_=u(""),V=G(()=>(R.value||[]).filter(S=>{const a=S.name.toLowerCase(),o=_.value.toLowerCase();return a.includes(o)}));return(S,a)=>{const o=te,$=se,T=De,A=ve,O=_e,I=he,D=ye;return r(),P(D,{theme:m?"module":"default"},{menuContents:y(()=>[w(o)]),default:y(()=>[w(I,{hideMobileSidebar:""},{aside:y(()=>[w(o)]),pageHeader:y(()=>[w($,{title:L(v).title,description:L(v).description,links:L(v).links},null,8,["title","description","links"]),i("div",Ke,[w(T,{id:"listing-search",inputValue:L(_),"onUpdate:inputValue":a[0]||(a[0]=l=>de(_)?_.value=l:null)},null,8,["inputValue"])])]),default:y(()=>[w(O,null,{default:y(()=>[(r(!0),b(W,null,X(L(V),l=>{var F;return r(),P(A,{key:l._path,title:l.name,url:`${(F=l._path)==null?void 0:F.replace(/\/_module$/,"")}`},{default:y(()=>[i("p",null,B(l.description),1)]),_:2},1032,["title","url"])}),128))]),_:1})]),_:1})]),_:1},8,["theme"])}}});export{ut as default};
