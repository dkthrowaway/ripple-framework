import ne from"./DocsContentNavigation.a7a35c18.js";import le from"./DocsPageHeader.748b3cd5.js";import{d as G,r as p,I as W,o as se,a as oe,W as z,z as K,b as r,c as g,e as c,t as B,n as k,az as _,D as M,C as U,X as ue,aA as re,O as ie,f as F,F as X,V as Y,g as h,Y as pe,aB as b,U as ce,m as de,Z as fe,E as P,w,M as V,a0 as me,q as be}from"./entry.0d0d3204.js";import{o as ge}from"./index.f211eae5.js";import{_ as q}from"./RplIcon.vue.1080b655.js";import{u as ve}from"./useRippleEvent.b8fa533b.js";import{_ as _e}from"./RplPromoCard.vue.1d23e4a7.js";import he from"./DocsCardGrid.d7f2c569.js";import{_ as ye}from"./AppSidebarLayout.vue.5cadffef.js";import{_ as we}from"./AppLayout.vue.4c23ce6c.js";import{u as Oe}from"./asyncData.05b3d528.js";import{u as Se}from"./head.07ce4093.js";import"./useDocsNavigation.577cb510.js";import"./RplLink.vue.d124e52c.js";import"./RplExpandable.vue.5a1f001c.js";import"./DocsNavLink.efa436a6.js";import"./nuxt-link.259eedef.js";import"./ready.3daed40e.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./config.ad1cc276.js";import"./DocsLink.60ef8cba.js";import"./RplTextLink.css.d1d0bae2.js";import"./RplImage.css.4ed59872.js";import"./RplList.vue.a6288bad.js";const $e=["for"],Ie={class:"rpl-search-bar__inner"},Le=["onKeydown"],Ve=["id","aria-owns","aria-expanded","placeholder"],Be=c("div",{class:"rpl-search-bar__menu"},[c("span",{class:"rpl-search-bar__menu-noresults"}," No results ")],-1),Re=["id"],Ce=["id","data-option-id","role","onKeydown","onClick"],Te={class:"rpl-search-bar__right"},ke={type:"submit","aria-label":"search",class:"rpl-search-bar-submit rpl-u-focusable-inline"},Fe={key:0,class:"rpl-search-bar-submit__label rpl-type-label rpl-type-weight-bold"},Ae={class:"rpl-search-bar-submit__icon"},De={inheritAttrs:!1},Ee=G({...De,__name:"RplSearchBar",props:{variant:{default:"default"},id:{},autoFocus:{type:Boolean,default:!1},inputLabel:{default:"Search"},inputValue:{default:""},submitLabel:{type:[String,Boolean],default:"Search"},suggestions:{default:()=>[]},maxSuggestionsDisplayed:{default:10},placeholder:{default:""},globalEvents:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!1},getSuggestionVal:{type:Function,default:d=>d},getOptionLabel:{type:Function,default:d=>d},getOptionId:{type:Function,default:d=>d},isOptionSelectable:{type:Function,default:d=>!0},showLabel:{type:Boolean,default:!1},isFreeText:{type:Boolean,default:!0},submitOnClear:{type:Boolean,default:!1}},emits:["update:inputValue","submit"],setup(d,{emit:f}){const n=d,{emitRplEvent:v}=ve("rpl-search-bar",f),o=p(""),A=p(null),m=p(null),R=p(null),y=p([]),O=p(null),S=W(()=>`${n.id}__menu`),l=p(!1),s=p(null),$=p(!1);se(()=>{n.autoFocus&&(O.value=setTimeout(()=>{var e;return(e=m.value)==null?void 0:e.focus()},100))}),oe(()=>{O.value&&clearTimeout(O.value)}),ge(A,()=>{u(!1)});const C=e=>{v("submit",{action:"search",id:n.id,name:n.inputLabel,value:o.value,text:e==="button"?n.submitLabel:null,type:e},{global:n.globalEvents})},D=e=>{o.value=e.target.value,f("update:inputValue",e.target.value),l.value=!0},I=(e,t)=>{var i;const a=n.getOptionLabel(e);t&&((i=m.value)==null||i.focus()),o.value=n.getSuggestionVal(e),f("update:inputValue",e),l.value=!1,v("submit",{action:"search",id:n.id,text:n.getSuggestionVal(e),name:n.inputLabel,value:a,payload:e,type:"suggestion"},{global:n.globalEvents})},L=()=>n.getOptionId(n.suggestions[0]),E=(e=!1)=>{var t;l.value=!0,e&&((t=n.suggestions)!=null&&t.length)&&(s.value=L())},u=(e=!1)=>{var t;l.value=!1,s.value=null,e&&((t=m.value)==null||t.focus())},T=async()=>{var e;$.value=!0,await K(),(e=m.value)==null||e.focus()},Z=()=>{$.value=!1},j=async()=>{var e;f("update:inputValue",null),o.value="",n.submitOnClear&&v("submit",{action:"search",id:n.id,text:"",name:n.inputLabel,value:"",payload:null,type:"suggestion"},{global:n.globalEvents}),await K(),(e=m.value)==null||e.focus()},J=()=>{const e=n.suggestions.findIndex(t=>n.getOptionId(t)===s.value);e<0?s.value=L():e<n.suggestions.length-1&&(s.value=n.getOptionId(n.suggestions[e+1]))},Q=()=>{const e=n.suggestions.findIndex(t=>n.getOptionId(t)===s.value);e<0?s.value=L():e>0&&(s.value=n.getOptionId(n.suggestions[e-1]))},x=e=>e>47&&e<58||e===32||e===8||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223,ee=e=>{var t;x(e.keyCode)&&((t=m.value)==null||t.focus())},te=e=>s.value===e,ae=e=>{const t=y.value.find(i=>i.dataset.optionId===e),a=R.value;if(a.scrollHeight>a.clientHeight){let i=a.clientHeight+a.scrollTop,H=t.offsetTop+t.offsetHeight;H>i?a.scrollTop=H-a.clientHeight:t.offsetTop<a.scrollTop&&(a.scrollTop=t.offsetTop)}t&&t.focus()};z(()=>n.inputValue,e=>{o.value=n.getSuggestionVal(e)},{immediate:!0}),z(s,async e=>{e!==null&&(await K(),ae(e))});const N=e=>e.toLowerCase().replace(/[^\w-]+/g,"-");return(e,t)=>(r(),g("form",{class:k({"rpl-search-bar":!0,[`rpl-search-bar--${e.variant}`]:!!e.variant,"rpl-search-bar--with-label":!!e.submitLabel,"rpl-search-bar--with-clear-btn":!!e.inputValue||!!o.value}),style:pe({"--local-max-items":e.maxSuggestionsDisplayed}),onSubmit:t[9]||(t[9]=b(a=>C("button"),["prevent"]))},[c("label",{class:k({"rpl-search-bar__label":!0,"rpl-u-visually-hidden":!e.showLabel,"rpl-type-h4-fixed":!0}),for:e.id},B(e.inputLabel),11,$e),c("div",Ie,[c("div",{ref_key:"containerRef",ref:A,class:"rpl-search-bar__input-wrap",onKeydown:[_(b(Q,["prevent"]),["up"]),_(b(J,["prevent"]),["down"]),t[5]||(t[5]=_(b(a=>u(!0),["prevent"]),["esc"])),t[6]||(t[6]=_(b(a=>u(!1),["exact"]),["tab"])),t[7]||(t[7]=_(b(a=>u(!1),["shift"]),["tab"]))]},[!e.isFreeText&&e.inputValue&&!$.value&&!l.value?(r(),g("div",{key:0,tabindex:"0",class:k({"rpl-search-bar__input":!0,"rpl-u-focusable-outline":!0,"rpl-u-focusable-outline--no-border":!0,"rpl-u-focusable--force-on":l.value}),onFocus:t[0]||(t[0]=a=>T())},[M(e.$slots,"suggestion",{option:{option:e.inputValue}},()=>[U(B(e.getOptionLabel(e.inputValue)),1)])],34)):ue((r(),g("input",ie({key:1},e.$attrs,{id:e.id,ref_key:"inputRef",ref:m,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value=a),"aria-owns":S.value,autocomplete:"off","aria-autocomplete":"list","aria-expanded":l.value,placeholder:e.placeholder,role:"combobox",class:{"rpl-search-bar__input":!0,"rpl-u-focusable-outline":!0,"rpl-u-focusable-outline--no-border":!0,"rpl-u-focusable--force-on":l.value},type:"search",onInput:D,onFocus:t[2]||(t[2]=a=>E(!1)),onBlur:t[3]||(t[3]=a=>Z()),onKeydown:t[4]||(t[4]=_(b(a=>C("enter"),["prevent"]),["enter"]))}),null,16,Ve)),[[re,o.value]]),e.showNoResults&&e.suggestions.length===0&&o.value&&l.value?M(e.$slots,"noresults",{key:2},()=>[Be]):F("",!0),e.suggestions.length&&l.value?(r(),g("div",{key:3,id:S.value,ref_key:"menuRef",ref:R,class:"rpl-search-bar__menu",role:"listbox",tabindex:"-1"},[(r(!0),g(X,null,Y(e.suggestions,a=>(r(),g("div",{id:N(e.getOptionId(a)),key:`opt-${N(e.getOptionId(a))}`,ref_for:!0,ref_key:"optionRefs",ref:y,"data-option-id":e.getOptionId(a),role:e.isOptionSelectable(a)?"option":null,class:k({"rpl-search-bar__menu-option":!0,"rpl-u-focusable-block":!0,"rpl-u-focusable--force-on":te(e.getOptionId(a))}),tabindex:"-1",onKeydown:[_(b(i=>e.isOptionSelectable(a)&&I(a,!0),["prevent"]),["space"]),_(b(i=>e.isOptionSelectable(a)&&I(a,!0),["prevent"]),["enter"]),i=>e.isOptionSelectable(a)&&ee],onClick:i=>e.isOptionSelectable(a)&&I(a,!1)},[M(e.$slots,"suggestion",{option:{option:a}},()=>[U(B(e.getOptionLabel(a)),1)])],42,Ce))),128))],8,Re)):F("",!0)],40,Le),c("div",Te,[o.value||e.inputValue?(r(),g("button",{key:0,type:"button","aria-label":"Clear search",class:"rpl-search-bar__clear rpl-u-focusable-inline",onClick:t[8]||(t[8]=a=>j())},[h(q,{name:"icon-cancel-circle-filled"})])):F("",!0),c("button",ke,[e.submitLabel?(r(),g("span",Fe,B(e.submitLabel),1)):F("",!0),c("span",Ae,[h(q,{name:"icon-search",size:"m"})])])])])],38))}});const Ke={class:"rpl-u-margin-b-8"},rt=G({__name:"module-listing",async setup(d){let f,n;const{page:v}=ce();Se(v);const m=de().params.slug[0]==="framework",{data:R}=([f,n]=fe(async()=>Oe("module-listing",async()=>await be().where({isModuleInfo:{$eq:!0}}).find())),f=await f,n(),f),y=p(""),O=W(()=>(R.value||[]).filter(S=>{const l=S.name.toLowerCase(),s=y.value.toLowerCase();return l.includes(s)}));return(S,l)=>{const s=ne,$=le,C=Ee,D=_e,I=he,L=ye,E=we;return r(),P(E,{theme:m?"module":"default"},{menuContents:w(()=>[h(s)]),default:w(()=>[h(L,{hideMobileSidebar:""},{aside:w(()=>[h(s)]),pageHeader:w(()=>[h($,{title:V(v).title,description:V(v).description,links:V(v).links},null,8,["title","description","links"]),c("div",Ke,[h(C,{id:"listing-search",inputValue:V(y),"onUpdate:inputValue":l[0]||(l[0]=u=>me(y)?y.value=u:null)},null,8,["inputValue"])])]),default:w(()=>[h(I,null,{default:w(()=>[(r(!0),g(X,null,Y(V(O),u=>{var T;return r(),P(D,{key:u._path,title:u.name,url:`${(T=u._path)==null?void 0:T.replace(/\/_module$/,"")}`},{default:w(()=>[c("p",null,B(u.description),1)]),_:2},1032,["title","url"])}),128))]),_:1})]),_:1})]),_:1},8,["theme"])}}});export{rt as default};
