import Z from"./DocsContentNavigation.3159e90d.js";import j from"./DocsPageHeader.ba316bb1.js";import{d as U,r as u,I as P,o as J,a as Q,W as E,z as ee,b as m,c as S,e as l,t as C,n as F,az as f,X as te,aA as se,O as ne,D as H,f as K,F as q,V as x,C as ae,g as y,Y as oe,aB as i,U as le,m as re,Z as ie,E as z,w as h,M as L,a0 as ue,q as pe}from"./entry.fd76962d.js";import{o as ce}from"./index.c6410a5a.js";import{_ as de}from"./RplIcon.vue.223b1736.js";import{u as fe}from"./useRippleEvent.94a84170.js";import{_ as me}from"./RplPromoCard.vue.1fd752df.js";import ge from"./DocsCardGrid.128d5632.js";import{_ as _e}from"./AppSidebarLayout.vue.33dda157.js";import{_ as be}from"./AppLayout.vue.f2c05f73.js";import{u as ve}from"./asyncData.5ba5f635.js";import{u as he}from"./head.af30402f.js";import"./useDocsNavigation.76c5a779.js";import"./RplLink.vue.cdfe2c08.js";import"./RplExpandable.vue.a77fded3.js";import"./DocsNavLink.2d67894c.js";import"./nuxt-link.65f38906.js";import"./ready.713d0131.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./config.967d9d24.js";import"./DocsLink.8edd1bf3.js";import"./RplTextLink.css.49341d80.js";import"./RplImage.css.3c3a582f.js";import"./RplList.vue.e9fcd02c.js";const ye=["for"],we={class:"rpl-search-bar__inner"},Se=["onKeydown"],Oe=["id","aria-owns","aria-expanded","placeholder"],$e=l("div",{class:"rpl-search-bar__menu"},[l("span",{class:"rpl-search-bar__menu-noresults"}," No results ")],-1),Ie=["id"],Le=["id","data-option-id","role","onKeydown","onClick"],Re={class:"rpl-search-bar__right"},Be={type:"submit","aria-label":"search",class:"rpl-search-bar-submit rpl-u-focusable-inline"},Ve={key:0,class:"rpl-search-bar-submit__label rpl-type-label rpl-type-weight-bold"},Te={class:"rpl-search-bar-submit__icon"},Ce={inheritAttrs:!1},ke=U({...Ce,__name:"RplSearchBar",props:{variant:{default:"default"},id:{},autoFocus:{type:Boolean,default:!1},inputLabel:{default:"Search"},inputValue:{default:""},submitLabel:{type:[String,Boolean],default:"Search"},suggestions:{default:()=>[]},maxSuggestionsDisplayed:{default:10},placeholder:{default:""},globalEvents:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!1},getSuggestionVal:{type:Function,default:r=>r},getOptionLabel:{type:Function,default:r=>r},getOptionId:{type:Function,default:r=>r},isOptionSelectable:{type:Function,default:r=>!0},showLabel:{type:Boolean,default:!1}},emits:["update:inputValue","submit"],setup(r,{emit:p}){const n=r,{emitRplEvent:g}=fe("rpl-search-bar",p),c=u(""),k=u(null),_=u(null),R=u(null),b=u([]),B=u(null),O=P(()=>`${n.id}__menu`),o=u(!1),a=u(null);J(()=>{n.autoFocus&&(B.value=setTimeout(()=>_.value.focus(),100))}),Q(()=>{clearTimeout(B.value)}),ce(k,()=>{w(!1)});const V=e=>{g("submit",{action:"search",id:n.id,name:n.inputLabel,value:c.value,text:e==="button"?n.submitLabel:null,type:e},{global:n.globalEvents})},A=e=>{c.value=e.target.value,p("update:inputValue",e.target.value),o.value=!0},$=(e,s)=>{const t=n.getOptionLabel(e);s&&_.value.focus(),c.value=n.getSuggestionVal(e),p("update:inputValue",e),o.value=!1,g("submit",{action:"search",id:n.id,text:n.getSuggestionVal(e),name:n.inputLabel,value:t,payload:e,type:"suggestion"},{global:n.globalEvents})},I=()=>n.getOptionId(n.suggestions[0]),D=(e=!1)=>{var s;o.value=!0,e&&((s=n.suggestions)!=null&&s.length)&&(a.value=I())},w=(e=!1)=>{o.value=!1,a.value=null,e&&_.value.focus()},d=()=>{const e=n.suggestions.findIndex(s=>n.getOptionId(s)===a.value);e<0?a.value=I():e<n.suggestions.length-1&&(a.value=n.getOptionId(n.suggestions[e+1]))},T=()=>{const e=n.suggestions.findIndex(s=>n.getOptionId(s)===a.value);e<0?a.value=I():e>0&&(a.value=n.getOptionId(n.suggestions[e-1]))},G=e=>e>47&&e<58||e===32||e===8||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223,W=e=>{G(e.keyCode)&&_.value.focus()},X=e=>a.value===e,Y=e=>{const s=b.value.find(v=>v.dataset.optionId===e),t=R.value;if(t.scrollHeight>t.clientHeight){let v=t.clientHeight+t.scrollTop,N=s.offsetTop+s.offsetHeight;N>v?t.scrollTop=N-t.clientHeight:s.offsetTop<t.scrollTop&&(t.scrollTop=s.offsetTop)}s&&s.focus()};E(()=>n.inputValue,e=>{c.value=n.getSuggestionVal(e)},{immediate:!0}),E(a,async e=>{e!==null&&(await ee(),Y(e))});const M=e=>{e.toLowerCase().replace(/[^\w-]+/g,"-")};return(e,s)=>(m(),S("form",{class:F(`rpl-search-bar rpl-search-bar--${e.variant}`),style:oe({"--local-max-items":e.maxSuggestionsDisplayed}),onSubmit:s[6]||(s[6]=i(t=>V("button"),["prevent"]))},[l("label",{class:F({"rpl-search-bar__label":!0,"rpl-u-visually-hidden":!e.showLabel,"rpl-type-h4-fixed":!0}),for:e.id},C(e.inputLabel),11,ye),l("div",we,[l("div",{ref_key:"containerRef",ref:k,class:"rpl-search-bar__input-wrap",onKeydown:[f(i(T,["prevent"]),["up"]),f(i(d,["prevent"]),["down"]),s[3]||(s[3]=f(i(t=>w(!0),["prevent"]),["esc"])),s[4]||(s[4]=f(i(t=>w(!1),["exact"]),["tab"])),s[5]||(s[5]=f(i(t=>w(!1),["shift"]),["tab"]))]},[te(l("input",ne(e.$attrs,{id:e.id,ref_key:"inputRef",ref:_,"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),"aria-owns":O.value,autocomplete:"off","aria-autocomplete":"list","aria-expanded":o.value,placeholder:e.placeholder,role:"combobox",class:{"rpl-search-bar__input":!0,"rpl-u-focusable-outline":!0,"rpl-u-focusable-outline--no-border":!0,"rpl-u-focusable--force-on":o.value},type:"search",onInput:A,onFocus:s[1]||(s[1]=t=>D(!1)),onKeydown:s[2]||(s[2]=f(i(t=>V("enter"),["prevent"]),["enter"]))}),null,16,Oe),[[se,c.value]]),e.showNoResults&&e.suggestions.length===0&&c.value&&o.value?H(e.$slots,"noresults",{key:0},()=>[$e]):K("",!0),e.suggestions.length&&o.value?(m(),S("div",{key:1,id:O.value,ref_key:"menuRef",ref:R,class:"rpl-search-bar__menu",role:"listbox",tabindex:"-1"},[(m(!0),S(q,null,x(e.suggestions,t=>(m(),S("div",{id:M(e.getOptionId(t)),key:`opt-${M(e.getOptionId(t))}`,ref_for:!0,ref_key:"optionRefs",ref:b,"data-option-id":e.getOptionId(t),role:e.isOptionSelectable(t)?"option":null,class:F({"rpl-search-bar__menu-option":!0,"rpl-u-focusable-block":!0,"rpl-u-focusable--force-on":X(e.getOptionId(t))}),tabindex:"-1",onKeydown:[f(i(v=>e.isOptionSelectable(t)&&$(t,!0),["prevent"]),["space"]),f(i(v=>e.isOptionSelectable(t)&&$(t,!0),["prevent"]),["enter"]),v=>e.isOptionSelectable(t)&&W],onClick:v=>e.isOptionSelectable(t)&&$(t,!1)},[H(e.$slots,"suggestion",{option:{option:t}},()=>[ae(C(e.getOptionLabel(t)),1)])],42,Le))),128))],8,Ie)):K("",!0)],40,Se),l("div",Re,[l("button",Be,[e.submitLabel?(m(),S("span",Ve,C(e.submitLabel),1)):K("",!0),l("span",Te,[y(de,{name:"icon-search",size:"m"})])])])])],38))}});const Ae={class:"rpl-u-margin-b-8"},at=U({__name:"module-listing",async setup(r){let p,n;const{page:g}=le();he(g);const _=re().params.slug[0]==="framework",{data:R}=([p,n]=ie(async()=>ve("module-listing",async()=>await pe().where({isModuleInfo:{$eq:!0}}).find())),p=await p,n(),p),b=u(""),B=P(()=>(R.value||[]).filter(O=>{const o=O.name.toLowerCase(),a=b.value.toLowerCase();return o.includes(a)}));return(O,o)=>{const a=Z,V=j,A=ke,$=me,I=ge,D=_e,w=be;return m(),z(w,{theme:_?"module":"default"},{menuContents:h(()=>[y(a)]),default:h(()=>[y(D,{hideMobileSidebar:""},{aside:h(()=>[y(a)]),pageHeader:h(()=>[y(V,{title:L(g).title,description:L(g).description,links:L(g).links},null,8,["title","description","links"]),l("div",Ae,[y(A,{id:"listing-search",inputValue:L(b),"onUpdate:inputValue":o[0]||(o[0]=d=>ue(b)?b.value=d:null)},null,8,["inputValue"])])]),default:h(()=>[y(I,null,{default:h(()=>[(m(!0),S(q,null,x(L(B),d=>{var T;return m(),z($,{key:d._path,title:d.name,url:`${(T=d._path)==null?void 0:T.replace(/\/_module$/,"")}`},{default:h(()=>[l("p",null,C(d.description),1)]),_:2},1032,["title","url"])}),128))]),_:1})]),_:1})]),_:1},8,["theme"])}}});export{at as default};
